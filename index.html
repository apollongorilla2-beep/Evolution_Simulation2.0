<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Evolution Simulator</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <main>
        <div class="main-content">
            <div id="controls">
                <p>Current Generation: <span id="generationCount">0</span></p>
                <p>Alive Population: <span id="populationCount">0</span></p>
                <p>Generation Progress: <span id="generationProgress">0%</span></p>
                <p>Reset Mode: <span id="resetMode">Majority Max Age</span></p>
                <button id="resetButton">Start Simulation</button>
                <button id="togglePauseButton">Pause Simulation</button>

                <div class="slider-group">
                    <label for="animationSpeedSlider">Animation Speed: <span id="animationSpeedValue">60</span> FPS</label>
                    <input type="range" id="animationSpeedSlider" min="10" max="120" value="60">
                </div>
                <div class="slider-group">
                    <label for="mutationRateSlider">Mutation Rate: <span id="mutationRateValue">0.15</span></label>
                    <input type="range" id="mutationRateSlider" min="0.01" max="0.5" value="0.15" step="0.01">
                </div>
                <div class="slider-group">
                    <label for="mutationStrengthSlider">Mutation Strength: <span id="mutationStrengthValue">0.8</span></label>
                    <input type="range" id="mutationStrengthSlider" min="0.1" max="2.0" value="0.8" step="0.1">
                </div>
                <div class="slider-group">
                    <label for="foodCountSlider">Food Count: <span id="foodCountValue">300</span></label>
                    <input type="range" id="foodCountSlider" min="50" max="1000" value="300" step="10">
                </div>
                <div class="slider-group">
                    <label for="initialLifespanSlider">Initial Lifespan: <span id="initialLifespanValue">50</span>s</label>
                    <input type="range" id="initialLifespanSlider" min="10" max="120" value="50" step="5">
                </div>
                <div class="slider-group">
                    <label for="visionRangeSlider">Vision Range: <span id="visionRangeValue">100</span>px</label>
                    <input type="range" id="visionRangeSlider" min="50" max="300" value="100" step="10">
                </div>
                <div class="slider-group">
                    <label for="initialBiomePreferenceSlider">Initial Biome Preference: <span id="initialBiomePreferenceValue">0</span></label>
                    <input type="range" id="initialBiomePreferenceSlider" min="0" max="4" value="0" step="1">
                </div>

                <button id="toggleFoodButton">Toggle Food Visibility</button>
                <button id="toggleBiomesButton">Toggle Biome Visibility</button>

                <div id="resetOptions">
                    <h4>Set Generation Length:</h4>
                    <button id="majorityMaxAgeButton">Majority Max Age</button>
                    <button id="reset1sButton">1s Generation</button>
                    <button id="reset3sButton">3s Generation</button>
                    <button id="reset5sButton">5s Generation</button>
                    <button id="reset10sButton">10s Generation</button>
                </div>
            </div>

            <canvas id="evolutionCanvas" class="simulator" width="800" height="600"></canvas>

            <div class="chart-container">
                <h3>Average Fitness Over Generations</h3>
                <canvas id="fitnessChart"></canvas>
            </div>
            <div class="chart-container">
                <h3>Population Over Generations</h3>
                <canvas id="populationChart"></canvas>
            </div>

            <div class="chart-container">
                <h3>Average Speed Over Generations</h3>
                <canvas id="speedChart"></canvas>
            </div>

            <div class="chart-container">
                <h3>Average Size Over Generations</h3>
                <canvas id="sizeChart"></canvas>
            </div>
            <div class="chart-container">
                <h3>Average Food Eaten Per Generation</h3>
                <canvas id="foodEatenChart"></canvas>
            </div>
            <div class="chart-container">
                <h3>Average Vision Range Over Generations</h3>
                <canvas id="visionRangeChart"></canvas>
            </div>
            <div class="chart-container">
                <h3>Average Lifespan Over Generations</h3>
                <canvas id="lifespanChart"></canvas>
            </div>
            <div class="chart-container">
                <h3>Average Biome Preference Over Generations</h3>
                <canvas id="biomePreferenceChart"></canvas>
            </div>
        </div>

        <div class="side-panel">
            <h2>Top 3 Creature Brains</h2>
            <div id="brainDisplay1" class="creature-brain-display">
                <h4>Creature 1 <span class="color-box" style="background-color: gray;"></span></h4>
                <canvas class="brain-canvas" width="300" height="200"></canvas>
            </div>
            <div id="brainDisplay2" class="creature-brain-display">
                <h4>Creature 2 <span class="color-box" style="background-color: gray;"></span></h4>
                <canvas class="brain-canvas" width="300" height="200"></canvas>
            </div>
            <div id="brainDisplay3" class="creature-brain-display">
                <h4>Creature 3 <span class="color-box" style="background-color: gray;"></span></h4>
                <canvas class="brain-canvas" width="300" height="200"></canvas>
            </div>
        </div>
    </main>

    <script type="module" src="js/main.js"></script>
</body>
</html>
